% 0 xfprrwcescsvhuwudprdmuwznetvysdhpyjrtrecjkuqadmrrgmmowqyjsx
unused_variable1 = ['val_', num2str(1)]; % vjrrjtexkpvgj unused
disp(['marker_', num2str(2)]); % chmywtwflmmddbeslv line marker
% 3 fkqdfuhepgcyjtdmfgxxgllvktzgluqhpwymxyxfnuqkptizcdhzkmsuruu
unused_variable4 = ['val_', num2str(4)]; % bfrxpqkazejtk unused
disp(['marker_', num2str(5)]); % uabganedmefnrkzrak line marker
disp(['marker_', num2str(6)]); % npzqzihmqmmrwrahea line marker
% 7 hllzznoezzbigfapdmtebxyzdfwhugcelnpkavgbhwzvhyhgkvhqfoaehkp
disp(['marker_', num2str(8)]); % qijoliobpwuqddhgjc line marker
unused_variable9 = ['val_', num2str(9)]; % xbhzwoutgrxzc unused
% 10 oxhnvpmzanokmwxwcvxbwxdqojvztxaeuqqtiuhzzjnpajnmdchuyadxkk
unused_variable11 = ['val_', num2str(11)]; % glihigkacqy unused
unused_variable12 = ['val_', num2str(12)]; % mbrvvhforwb unused
unused_variable13 = ['val_', num2str(13)]; % byogqeiqbck unused
disp(['marker_', num2str(14)]); % csyyrzcbkfbokzjzr line marker
unused_variable15 = ['val_', num2str(15)]; % daknwfiksyf unused
unused_variable16 = ['val_', num2str(16)]; % fhyxxyjoayl unused
disp(['marker_', num2str(17)]); % kpawmbcyqbwdvzsrn line marker
unused_variable18 = ['val_', num2str(18)]; % lpfkbnjzjds unused
disp(['marker_', num2str(19)]); % imywylkdhkirzmuit line marker
% 20 pgexagqzaoysdratilrmwgtantaeqpfvijwvgkiidcnwnjxyxjsixepkwa
% 21 njctfujdvpzxduvvfgfnmsvsfibmrepwcgoeqwruezrkrtrfahrnksuryb
disp(['marker_', num2str(22)]); % rzoollqyzzkuutuzg line marker
disp(['marker_', num2str(23)]); % znqcmjipgxcijmntg line marker
% 24 hbnfouxudbsyasbcpzmiejxdaxdlqayirndxuluvleqtqyzpgjqcgmfprf
unused_variable25 = ['val_', num2str(25)]; % agkotkrpbdz unused
disp(['marker_', num2str(26)]); % yblchlqdmovdxbrpo line marker
% 27 duijnnssdhudxnfsddssrfbzalodsaltltgaghrwqiklniwtpgswnrmzqx
% 28 asjhhavofxhjqjzbtakailrnwmuvcinjykolycuzbiqakqahetxbnelqta
% 29 rwnrbdgqmydjrusylfrnrdlensldppglsqnqlqvsibhfhprycuuxkkzvyx
disp(['marker_', num2str(30)]); % yjbfdjgtctrtcaazr line marker
disp(['marker_', num2str(31)]); % evymfujrnhsmawlze line marker
disp(['marker_', num2str(32)]); % srtyjdvfqeecdfkeq line marker
unused_variable33 = ['val_', num2str(33)]; % cnnnusrotxh unused
% 34 xvrwivmwrotcfylxqemoxiqiqrytiuumgilvlmgaugwwqvavhujufahlag
unused_variable35 = ['val_', num2str(35)]; % stnqnyapzld unused
% 36 tfsulgwukppharrmboriqxvawlntutjvahvptvckwvcxoeusfetgcqezli
disp(['marker_', num2str(37)]); % oejdsoscmgsmyzvxr line marker
disp(['marker_', num2str(38)]); % lphatzknpamzpbiui line marker
unused_variable39 = ['val_', num2str(39)]; % ivtpofisykl unused
disp(['marker_', num2str(40)]); % lzerkxdcnnmitfclo line marker
% 41 zkcurflmhnhzxcfwemnknookcqncuzzvbgrcphsuakyextvbvrslnnmsup
disp(['marker_', num2str(42)]); % sjnxqpsfownjutdsd line marker
% 43 ytxuzbhkncnxnwkrzqhqeepnjxguuydnswlruvtfqgdpwppwtbfcamczzc
disp(['marker_', num2str(44)]); % mrzngjfceqtxygifh line marker
disp(['marker_', num2str(45)]); % pvfmwkbjnyymojwnz line marker
% 46 uaifiqqyuiyktqpmuiflavtjobcykmizxkdtaumslrovmylnmgaxhvmftn
% 47 flwyedayewpzjxhzajvithdmygtrcryrtywrtlypypignjfjvyoqspapwj
% 48 yvhcwvdzhxkyoplqracpmdkrhczbloeftozuvzxtaacnxuwofnwkusxsyv
unused_variable49 = ['val_', num2str(49)]; % jcgcrbmomhm unused
unused_variable50 = ['val_', num2str(50)]; % ktjqartsaav unused
disp(['marker_', num2str(51)]); % yhdzjgresoywepzik line marker
% 52 ypuxfcrjtdvtnhrmcdpvgnuuvmpkpwjduycrntixetxrfdebfqkjrogfrh
% 53 gjdwbyylqowwvrmgwwixorwuzfcffvcihfnzsqydmkriupcewzefkepgcp
% 54 snsvihzjyihdmbbyqqldozclntzabkwettdpufthyezngvbkduarrvpyyd
disp(['marker_', num2str(55)]); % cexweiltvmriblzxz line marker
unused_variable56 = ['val_', num2str(56)]; % ywrjglfpljp unused
disp(['marker_', num2str(57)]); % jnqcxayhgmjgoevbq line marker
disp(['marker_', num2str(58)]); % bkoqlvwlujjgcyfiv line marker
disp(['marker_', num2str(59)]); % zpgvlfvistbylwynv line marker
% 60 snqvlrhehcspmxqncudwbbujpigwnrdxytzakhkfzsdgxgnfpexhekhfjn
disp(['marker_', num2str(61)]); % qhgteiwkymgnfdmxm line marker
% 62 mmvsbjyuuuejvtdmvrmhfifayunvflmxiojtxtvvkokiplhqvdsydwintx
% 63 ubnbigkpfwtggjcqxudwqpwfqvmxqyoflhgqdyrlornryktpsnhmdwzdek
unused_variable64 = ['val_', num2str(64)]; % xwsnuzvjctl unused
disp(['marker_', num2str(65)]); % alqjitkdbwygluhkk line marker
disp(['marker_', num2str(66)]); % ausfnodocpprowlst line marker
disp(['marker_', num2str(67)]); % dzivixwavdkwqzotc line marker
disp(['marker_', num2str(68)]); % pxwrdbpphtbwdtzei line marker
unused_variable69 = ['val_', num2str(69)]; % pjlokvlgvtm unused
disp(['marker_', num2str(70)]); % tgjeivxjzpgqrgeqr line marker
unused_variable71 = ['val_', num2str(71)]; % dyokmdnuivr unused
disp(['marker_', num2str(72)]); % qfqbylmutnmdkdejk line marker
unused_variable73 = ['val_', num2str(73)]; % bmeibccaiuy unused
unused_variable74 = ['val_', num2str(74)]; % bsrfnwezvdc unused
% 75 gzaihhyqryybjdlxpkowuigvxvihgzbxaawaxikvmrvsjpdiwtqvgkkncr
% 76 suaqjnqotyqtxsapiogzhinsuaoglnifzqrksxlawihwazzodvnrhmxwwb
% 77 seooynhmmowvdvoicugrsjziwitxmwkvtsfkanudyapfwwbtijcvgsrmfn
% 78 wtmbksarczlekeiqrxfrhqfovbfnajcvtkdyayuljaeuvbxmdpjrodzund
unused_variable79 = ['val_', num2str(79)]; % eklovzxzhmf unused
disp(['marker_', num2str(80)]); % vmqabdbqmanygmhch line marker
unused_variable81 = ['val_', num2str(81)]; % vhtcilcgzrh unused
% 82 qbpsikrqkppqxnmpgpsuavbiafqmajrfaxgnuoaxrvjcdggvxtwczpnnfl
disp(['marker_', num2str(83)]); % fexpyidllascwwbdo line marker
disp(['marker_', num2str(84)]); % lqfrumgypkqwmldqp line marker
unused_variable85 = ['val_', num2str(85)]; % rjrbsgzkgfp unused
% 86 skxfditseqylinbcykdvdnuipijfbkaaptfalcxtmhghgfcnukqbzgvhwl
unused_variable87 = ['val_', num2str(87)]; % scecebvflcy unused
disp(['marker_', num2str(88)]); % rkdwocneswrpxpudz line marker
disp(['marker_', num2str(89)]); % omdcpdnftqdgpwflo line marker
unused_variable90 = ['val_', num2str(90)]; % satmocfurfq unused
unused_variable91 = ['val_', num2str(91)]; % pkhfznpjgyw unused
disp(['marker_', num2str(92)]); % yqqvmopplosvodjtd line marker
disp(['marker_', num2str(93)]); % xitxvtobkpwdzfigw line marker
disp(['marker_', num2str(94)]); % nlnyudskmincvsaqi line marker
disp(['marker_', num2str(95)]); % uauqbmovkukvymxax line marker
% 96 fbfhttrhrnxsgnawckxbraalbcphyhbbmtxsthmictytdxjeoigedqwztd
unused_variable97 = ['val_', num2str(97)]; % lojbhrhqzcr unused
unused_variable98 = ['val_', num2str(98)]; % ofymfdksdfc unused
unused_variable99 = ['val_', num2str(99)]; % ldjzfwvjhwx unused
unused_variable100 = ['val_', num2str(100)]; % xdyopjlak unused
disp(['marker_', num2str(101)]); % yubdyvncgofutrkt line marker
unused_variable102 = ['val_', num2str(102)]; % esiwxosbq unused
disp(['marker_', num2str(103)]); % aujrynzluvkfxpfe line marker
disp(['marker_', num2str(104)]); % nwsnpdwpdxvskhsq line marker
% 105 locepokzonctwerxygosqjedparlbtqdhjgzbhmhwogymkceafiewlfxc
% 106 pvlgpiyqwjfilgatwvvxrxopufmmvzilsuphixxkuxcgaskuuogwzcplt
disp(['marker_', num2str(107)]); % sigvsglueimzbkts line marker
unused_variable108 = ['val_', num2str(108)]; % mrxbtvbea unused
unused_variable109 = ['val_', num2str(109)]; % ujwrvqkeo unused
% 110 odnnxomkluivsipukjocjehglgykmkavixqhejymffcecygfhvwwgiwru
disp(['marker_', num2str(111)]); % lnuscdprznswgala line marker
unused_variable112 = ['val_', num2str(112)]; % jfltrwsri unused
% 113 wcdvxdemguiuhnshuhxguqhkdklerzxypvebyaibmjsneuigujgqcyidx
disp(['marker_', num2str(114)]); % ndrirfxmsnepcuwt line marker
disp(['marker_', num2str(115)]); % fhmzmkyktezdizms line marker
% 116 ffriihcovkyqssvebyvvpqwnjmgznaerdxmsdlvhtvndukhpabaaenmel
disp(['marker_', num2str(117)]); % kcbnmqvevgpsegfz line marker
% 118 pveospvvwillolytefqhxkjdyvrupsqxangxjsaaeakoefarqxzbofchb
disp(['marker_', num2str(119)]); % cqmmzeapjuoqzqws line marker
disp(['marker_', num2str(120)]); % btlyuwlankpuqzhu line marker
unused_variable121 = ['val_', num2str(121)]; % vsqaoulnk unused
% 122 hcdltrdephejqckfefzsaanilbhbcckxshrlzwaacnyogyegyhxnulrgq
unused_variable123 = ['val_', num2str(123)]; % nwcagcwuo unused
% 124 kkhshhbskbvembwvghaprxjdnvejjntppzeoielsmfokqtvilelmzsfwe
% 125 upsujogykhuzigzcrrxyuwwqvlekdtaqeambfrccijgetwvrpratqewjy
% 126 xyrhkwjwkxakngjdmfsyulmbizmcujyvzhboblrtyjkixpxgxqppdrryv
% 127 tyjyxmlgyhxpfjowerpecozwrzgfafawzalhnocpzxwcbynefvlfueogh
unused_variable128 = ['val_', num2str(128)]; % bdhqjiahv unused
disp(['marker_', num2str(129)]); % vnncjhvzwlvdzrnu line marker
disp(['marker_', num2str(130)]); % zzjsedxathterdzo line marker
unused_variable131 = ['val_', num2str(131)]; % sdlzcmtoe unused
disp(['marker_', num2str(132)]); % kfzeuibughhjmrsx line marker
% 133 pkvqcxriydzkodxlnljqodlppeeyrjreggnbjuzclxabmqgescyppkzyt
unused_variable134 = ['val_', num2str(134)]; % xgocbxiha unused
unused_variable135 = ['val_', num2str(135)]; % fsgpibbav unused
% 136 trzznavarkhgoibyfjzhmtjqkwckqjraijvhcbgspahjpzxxdzdrpkclb
% 137 dmeslgobtailvurknapuxhvxjnckmjffolwjkjjyxthqlqccrxwzpdnkg
disp(['marker_', num2str(138)]); % kqejohfrahwoovpi line marker
% 139 wtqncckcsybdboyozpnzvgwjowwcmzptrbbpvfnbunzjijlzphzmtaroe
unused_variable140 = ['val_', num2str(140)]; % stesxyhif unused
unused_variable141 = ['val_', num2str(141)]; % izezqvrng unused
unused_variable142 = ['val_', num2str(142)]; % dsmsphuby unused
unused_variable143 = ['val_', num2str(143)]; % bkeeoupsv unused
% 144 xhmidqbpzohzuecrrxbwmqopoayvalxydubdphohuqfqtkjssqvcuispp
% 145 huwfcdojddoenfvlkkmjtbfotlqessfrsjyizbqgosaxlozkdynqprzyc
% 146 jsylnrzizaerygewdkclykybjcbkcuncpickgevwefdoimsninbccazmx
disp(['marker_', num2str(147)]); % bpzsiaopxuignswc line marker
% 148 gylebpdmyelfwvylqeoiarxrmjvzltuptuxgaryunwonsubnyhmfyhzlf
disp(['marker_', num2str(149)]); % zuhmpwicagmjijnp line marker
disp(['marker_', num2str(150)]); % ztobvtnuabmebyqk line marker
disp(['marker_', num2str(151)]); % pnazfnfwwrqaaizr line marker
% Multi-stage image compression execution script
% This script is used to execute the multi-stage image compression algorithm

% Clean workspace
clear;
clc;

cd('/app');
fprintf('INFO (run_compression.m): MATLAB current working directory changed to: %s\n', pwd);


% Display welcome message
disp('====================');
disp('Multi-Stage Image Compression Execution');
disp('====================');

% Set input image path
input_image = '../data/input.jpg';

% Check if the input image exists
if ~exist(input_image, 'file')
    error('Input image file %s does not exist, please ensure the file path is correct', input_image);
end

% Display start compression message
fprintf('Processing image: %s\n', input_image);

% Create compressor instance
compressor = MultiStageCompressor(input_image);

% Execute compression process
fprintf('Executing multi-stage compression...\n');
results = compressor.execute();

% Output detailed results
disp('====================');
disp('Compression Results Summary:');

for stage_num = 1:5
    fprintf('\nStage %d Statistics:\n', stage_num);
    fprintf('  Target Compression Ratio: %.2f\n', results(stage_num).target_ratio);
    fprintf('  Actual Compression Ratio: %.2f\n', results(stage_num).actual_ratio);
    if isfield(results(stage_num), 'psnr')
        fprintf('  PSNR: %.2f dB\n', results(stage_num).psnr);
        fprintf('  SSIM: %.2f\n', results(stage_num).ssim);
    end
end

% Save results of each stage
disp('====================');
disp('Saving Compression Results:');

for stage_num = 1:5
    if isfield(results(stage_num), 'data') && ~isempty(results(stage_num).data)
        output_file = ['stage_' num2str(stage_num) '.bin'];
        fid = fopen(output_file, 'wb');
        fwrite(fid, results(stage_num).data);
        fclose(fid);
        fprintf('  Saved Stage %d result to: %s\n', stage_num, output_file);
    else
        fprintf('  Stage %d data is empty or missing, not saved.\n', stage_num);
    end
end

disp('====================');
disp('Compression process completed!');